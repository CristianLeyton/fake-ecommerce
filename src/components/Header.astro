---
import Logo from '@components/resources/Logo.astro';
import HamburguerIcon from '@icons/HamburguerIcon.astro';
import SetTheme from '@components/resources/SetTheme.astro';
import WishListIcon from './resources/icons/WishListIcon.astro';

---

<header id="header" class="flex flex-wrap sticky top-4 overflow-hidden md:flex-nowrap justify-between items-center my-4 px-3 border border-yellow-100/20 bg-yellow-50/50 rounded-[2rem] dark:bg-neutral-800/50 dark:border-neutral-700/60 h-[70px] z-50">
    <a href="/" class="w-44"><Logo /></a>

    <div class="flex items-start w-full md:w-auto md:items-center gap-2">
        <div class="buttons flex items-center order-1 relative -top-[50px] md:top-0 gap-3 md:gap-2" >
            <button title="Cambiar tema"><SetTheme /></button>
            <button title="Lista de deseos"> <WishListIcon/> </button>
            <button title="Menú" id="menu-icon"><HamburguerIcon /></button>
        </div>

        <nav class="flex flex-col p-2 *:py-2 last:mb-2 md:last:mb-0 md:flex-row md:flex gap-2 md:gap-5 *:font-semibold *:text-sm *:transition w-full">
                <a href="/#inicio"  title="Inicio" class="hover:text-orange-500 active:text-black dark:active:text-white">Inicio</a>
                <a href="#"  title="Categorias" class="hover:text-orange-500 active:text-black dark:active:text-white">Cateogorias</a>
                <a href="#"  title="Productos" class="hover:text-orange-500 active:text-black dark:active:text-white">Productos</a>
                <a href="#"  title="Nosotros" class="hover:text-orange-500 active:text-black dark:active:text-white">Nosotros</a>
                <a href="#test" title="Contacto"  class="hover:text-orange-500 active:text-black dark:active:text-white">Contacto</a>
        </nav>
        </div>
    </header>

<style>
    :root {
  interpolate-size: allow-keywords;
}
    #header {
        transition: height 0.3s ease-out;
        backdrop-filter: blur(16px);
    }
</style>

<script>
    document.addEventListener('astro:page-load', () => {
    const headerElement = document.querySelector("#header");

    document.querySelector('#menu-icon').addEventListener('click', (event)=> {
        headerElement.classList.toggle('h-[70px]');
        
        // Evitar que el click en el botón cierre el menú inmediatamente
        event.stopPropagation();

        // Escuchar clics en cualquier lugar del documento
        document.addEventListener("click", (event) => {
        // Verificar si el clic fue fuera del submenú y del botón
        if (
            //@ts-ignore
/*             !headerElement.contains(event.target) && */ //Este no cierra el menu cuando doy click en algun item del mismo
            event.target !== headerElement //Este si cierra el menu cuando clickeo algun elemento de dentro del menu, o fuera
        ) {
            headerElement.classList.add("h-[70px]");
        }
        });
    })
});
</script>