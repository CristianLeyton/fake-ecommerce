---
import { getProducts } from "@lib/get-products";
import ProductCard from "@components/resources/ProductCard.astro";

interface Props {
  categoryId: string;
}

const { categoryId } = Astro.props;

const products = await getProducts(categoryId);
---

<div class="flex flex-wrap gap-4 col-span-full">
  {
    products[0] ? (
      products.map((product) => {
        const { name, description, image, price, sku } = product;
        return (
          <ProductCard title={name} image={image.url} price={price} sku={sku}>
            {description}
          </ProductCard>
        );
      })
    ) : (
      <p class="col-span-full text-orange-500 font-semibold place-content-center text-xl text-center p-3 bg-yellow-50 dark:bg-neutral-700 shadow rounded-lg">
        Â¡Lo siento, no hay ningun producto en esta categoria!
      </p>
    )
  }
</div>
