---
import { getCategories } from "@lib/get-categories";
import Products from "@layouts/LayoutProducts.astro";
import ProductList from "@components/ProductList.astro";

interface Category {
  id_categorie: number;
  name: string;
  description: string;
  image: {
    url: string;
  };
}

// Obtener los datos para las rutas dinámicas
export async function getStaticPaths() {
  const categories = await getCategories();

  return categories.map((categorie: Category) => ({
    params: { slug: categorie.id_categorie.toString() },
    props: { categorie: categorie as Category },
  }));
}

// Obtener el parámetro dinámico y props
const { slug } = Astro.params;
const { categorie } = Astro.props as { categorie: Category };

---


<Products title={categorie.name}>
  <ProductList categoryId={slug}/>
</Products>;